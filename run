#!/bin/bash

cleanup() {
    echo "stopping processes..."
    kill $BACKEND_PID $FRONTEND_PID 2>/dev/null
    exit 0
}

trap cleanup INT TERM

echo "running backend..."
cd backend
php artisan serve &
BACKEND_PID=$!

sleep 2

echo "running frontend..."
cd ../frontend
npm run dev &
FRONTEND_PID=$!

echo "========================================"
echo "backend PID: $BACKEND_PID"
echo "frontend PID: $FRONTEND_PID"
echo "========================================"

wait